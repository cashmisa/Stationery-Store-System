@model LUSSIS.Models.WebDTO.AdjVoucherColView

@{
    ViewBag.Title = "CreateAdjustments";
}
<h2>CreateAdjustments</h2>

<button id="add" type="button">Add</button>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()


    <Table>
        <tr>
            <th>@Html.LabelFor(model => model.MyList.First().ItemNum, "Item Code")</th>
            <th>@Html.LabelFor(model => model.MyList.First().Sign)</th>
            <th>@Html.LabelFor(model => model.MyList.First().Quantity)</th>
            <th>@Html.LabelFor(model => model.MyList.First().Reason)</th>
            <th>Remove</th>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tbody id="AdjustmentsDiv">
            @foreach (var adjustment in Model.MyList)
            {
            @Html.Partial("_CreateAdjustments", new LUSSIS.Models.WebDTO.AdjustmentVoucherDTO())
            }
            
        </tbody>
    </Table>


    <input type="submit" value="Submit" />


}

@section Scripts {
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script type="text/javascript">
        $(document).on("click", ".deleteContact", function () {
            $(this).closest("tr").remove();
        });
    </script>
    <script>
var url = '@Url.Action("_CreateAdjustments")';
var form = $("form");
var Adjustments = $('#AdjustmentsDiv');
$('#add').click(function() {
    $.get(url, function(response) {
        Adjustments.append(response);
        // Reparse the validator for client side validation
        form.removeData("validator");
        form.removeData("unobtrusiveValidation");
        $.validator.unobtrusive.parse(form);
    });
    });
    </script>
}




